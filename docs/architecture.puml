@startuml Moments Application Architecture

!theme plain
skinparam backgroundColor #1b2735
skinparam defaultFontColor white
skinparam classBackgroundColor #667eea
skinparam classBorderColor white
skinparam componentBackgroundColor #764ba2
skinparam componentBorderColor white

title Moments Application - Architecture Overview

package "Frontend (Next.js)" {
  component [Page Component] as Page
  component [UI Components] as UI
  component [Dialog Forms] as Dialog
  component [Notification System] as Notif
}

package "API Layer" {
  component [Activities API] as API
  component [Email Notification API] as EmailAPI
}

package "Database Layer" {
  database [SQLite Database] as DB
  component [Prisma ORM] as Prisma
}

package "External Services" {
  component [Email Service] as Email
}

' User interactions
actor User

User --> Page : Interacts with UI
Page --> UI : Renders components
Page --> Dialog : Opens forms
Page --> Notif : Shows notifications

' API calls
Page --> API : CRUD operations
API --> Prisma : Database queries
Prisma --> DB : SQL operations

' Email notifications
API --> EmailAPI : Send notifications
EmailAPI --> Email : SMTP email

' Data flow
DB --> Prisma : Data retrieval
Prisma --> API : Formatted data
API --> Page : JSON response
Page --> UI : State updates

note right of Page
  - Galaxy themed UI
  - Bubble components
  - Real-time updates
  - Filter & search
end note

note right of DB
  Activities table:
  - id, title, description
  - address, labels, rating
  - date, picture
end note

@enduml